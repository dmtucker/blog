<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Cosmarium</title>
    <meta name="description" content="David Tucker on Networking">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="author"  type="text/plain" href="../humans.txt">
    <link rel="license" type="text/plain" href="https://www.gnu.org/licenses/gpl.txt">
    <link rel="icon" type="image/png" href="../resources/brain.png">
    <link rel="stylesheet" href="../resources/normalize.min.css">
    <link rel="stylesheet" href="../resources/global.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <main id="main">
        <header>
            <pre>
   ____                               _                 
  / ___|___  ___ _ __ ___   __ _ _ __(_)_   _ _ __ ___  
 | |   / _ \/ __| '_ ` _ \ / _` | '__| | | | | '_ ` _ \ 
 | |__| (_) \__ \ | | | | | (_| | |  | | |_| | | | | | |
  \____\___/|___/_| |_| |_|\__,_|_|  |_|\__,_|_| |_| |_|</pre>
        </header>
        <article>
            <h2>Services</h2>
            <ul>
                <li><a href="http://freedns.afraid.org/">Free DNS</a></li>
                <li><a href="https://www.privateinternetaccess.com/">PIA VPN</a></li>
            </ul>
        </article>
        <article id="erl-ipv6-waveg">
            <h2>IPv6 on EdgeRouter Lite 1.7.0 with Wave G</h2>
            <time>2015-09-19</time>
            <section>
                <h3>Configuration</h3>
                <pre>interfaces {
    ethernet eth0 {
        address 192.168.1.1/24
        description LAN
        ipv6 {
            address {
                autoconf
            }
            router-advert {
                prefix ::/64 {
                }
            }
        }
    }
    ethernet eth1 {
        address dhcp
        description WAN
        dhcpv6-pd {
            pd 0 {
                interface eth0 {
                    host-address ::1
                    prefix-id :1
                    service slaac
                }
                interface eth2 {
                    host-address ::1
                    prefix-id :2
                    service slaac
                }
                prefix-length 60
            }
            prefix-only
        }
        ipv6 {
            address {
                autoconf
            }
        }
    }
    ethernet eth2 {
        address 192.168.2.1/24
        description WLAN
        ipv6 {
            address {
                autoconf
            }
            router-advert {
                prefix ::/64 {
                }
            }
        }
    }
}</pre>
            </section>
            <p>
                Shortly after moving to Seattle, I bought an <a href="https://www.ubnt.com/edgemax/edgerouter-lite/">EdgeRouter Lite</a>, and <em>I absolutely love it!</em>
                More recently, I moved to a building that is serviceable by <a href="http://gowaveg.com/">Wave G (formerly CondoInternet)</a> which I decided to switch to (from Comcast) for their megabit service.
            </p>
            <p>
                One difference I quickly discovered is the way each ISP deploys IPv6.
                There are many examples/guides for configuring EdgeRouter to work with Comcast IPv6, but those do not seem to work with Wave G.
                Now I know why.
            </p>
            <p>
                Comcast assigns the WAN interface an IPv6 address using stateful DHCPv6 whereas Wave G lets it configure itself using SLAAC.
                This is evident in the fact that, when connected to Comcast, the WAN interface receives a <code>/128</code> address (<a href="http://www.comcast6.net/index.php/ipv6-deployment-faq">source</a>) which is not possible with SLAAC.
                When you enable <code>dhcpv6-pd</code> on EdgeRouter, it assumes your ISP will use stateful DHCPv6 which means that getting it to work with Wave G requires a little extra configuration (namely <code>ipv6 address autoconf</code> and <code>dhcpv6-pd prefix-only</code>, EdgeRouter's "Option to not request an [sic] WAN address (no ia-na) from the DHCPv6-pd server").
                Note that "no ia-na" refers to <a href="https://tools.ietf.org/html/rfc3315#section-22.4">DHCPv6 IA_NA</a>, an element of stateful DHCPv6, which further corroborates the statements above.
            </p>
            <p>
                Another thing to note is that Wave G delegates <code>/60</code> prefixes.
                This is great because it allows you to deploy up to 16 different IPv6 subnets internally without NAT!
                My configuration takes advantage of this by delegating a unique subnet to each of the LANs.
            </p>
            <h4>Disclaimer</h4>
            <p>
                I have not provided firewall configuration details here, but that does not mean you should use IPv6 without a firewall!
                Remember that there is no need for NAT in IPv6 which means that connected devices are directly visible to the Internet at-large.
                NAT hides the topology of your internal network and shields it from unsolicited inbound traffic.
                If you do not implement policies to regulate incoming traffic, then anyone can attempt to connect directly to your IPv6-enabled devices!
            </p>
        </article>
        <article id="speedtest">
            <h2>Ookla SPEEDTEST Personal Record</h2>
            <img src="https://www.speedtest.net/result/4146390674.png" alt="124.61Mbps/12.11Mbps/8ms">
        </article>
        <footer><a href="#main">Return to the top.</a></footer>
    </main>
</body>
</html>
